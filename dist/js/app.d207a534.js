(function(e){function t(t){for(var a,i,r=t[0],c=t[1],l=t[2],d=0,b=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&b.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(b.length)b.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},o={app:0},n=[];function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0229":function(e,t,s){e.exports=s.p+"img/signup_img.1d03013c.jpg"},"43fb":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("7a23");function o(e,t,s,o,n,i){const r=Object(a["x"])("Menu"),c=Object(a["x"])("router-view");return Object(a["q"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(r),Object(a["h"])(c)],64)}var n=s("bc3a"),i=s.n(n);const r={class:"navbar navbar-expand-lg bg-light"},c={class:"container-fluid"},l=Object(a["f"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(a["f"])("i",{class:"fa-solid fa-bars"})],-1),u={class:"collapse navbar-collapse",id:"navbarSupportedContent"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},b={class:"nav-item"},p=Object(a["f"])("li",{class:"nav-item"},[Object(a["f"])("a",{class:"nav-link active","aria-current":"page",href:"/Recorder"},"Créer Vidéo")],-1),m={key:0,class:"d-flex justify-content-end"},f={class:"navbar-nav me-auto mb-2 mb-lg-0"},h={class:"nav-item"},j={class:"nav-item"},v={key:1,class:"d-flex justify-content-end"},O=Object(a["f"])("ul",{class:"navbar-nav me-auto mb-2 mb-lg-0"},[Object(a["f"])("li",{class:"nav-item"},[Object(a["f"])("a",{class:"btn btn-success",href:"/Account"},"Mon compte")])],-1),g=[O];function _(e,t,s,o,n,i){const O=Object(a["x"])("router-link");return Object(a["q"])(),Object(a["e"])("div",null,[Object(a["f"])("nav",r,[Object(a["f"])("div",c,[Object(a["g"])(" Demasoft "),l,Object(a["f"])("div",u,[Object(a["f"])("ul",d,[Object(a["f"])("li",b,[Object(a["h"])(O,{class:"nav-link active",to:"/"},{default:Object(a["E"])(()=>[Object(a["g"])("Home")]),_:1})]),p]),null===this.$store.state.userData?(Object(a["q"])(),Object(a["e"])("div",m,[Object(a["f"])("ul",f,[Object(a["f"])("li",h,[Object(a["h"])(O,{class:"nav-link",to:"/Signup"},{default:Object(a["E"])(()=>[Object(a["g"])("Signup")]),_:1})]),Object(a["f"])("li",j,[Object(a["h"])(O,{class:"btn btn-primary",to:"/Signin"},{default:Object(a["E"])(()=>[Object(a["g"])("Signin")]),_:1})])])])):Object(a["d"])("",!0),null!=this.$store.state.userData?(Object(a["q"])(),Object(a["e"])("div",v,g)):Object(a["d"])("",!0)])])])])}var w={name:"Menu",components:{},data(){return{message:"Actif"}}},y=s("6b0d"),S=s.n(y);const k=S()(w,[["render",_]]);var C=k;s("f33e");var R={name:"App",components:{Menu:C},methods:{verifyTimeoutSessionStorage(){if(sessionStorage.getItem("userData")){const t=JSON.parse(sessionStorage.getItem("userData"));console.log(t);const s=new Date(t.timeout);let a=s.getDate();console.log(a);const o=new Date;if(console.log(o.getDate()),o.getDate()===a){console.log("Session à jour"),this.$store.state.userData=t.user_data;const s={user_mail:t.user_data.user_mail,user_password:t.user_data.user_password};try{i.a.post(this.$store.state.gconfig.url_signin,s,{headers:{"Content-Type":"application/json"}}).then(e=>{this.serverResponse=e.data,this.submitClick=!1,200===e.data.status&&(this.$store.state.userData=e.data.user_data)})}catch(e){console.log(e)}}else console.log("délai session dépassé"),sessionStorage.removeItem("userData"),this.$store.state.userData=null}else console.log("Aucune session présente"),this.$store.state.userData=null}},created(){this.verifyTimeoutSessionStorage()}};s("cd18");const D=S()(R,[["render",o]]);var I=D,x=s("5502");let M=s("be6f");const P=new x["a"].Store({state:{gconfig:M,userData:null},getters:{},mutations:{},actions:{}});var q=P,V=s("6605");const U={class:"container"},$=Object(a["f"])("h1",null,"Home",-1),A=[$];function E(e,t,s,o,n,i){return Object(a["q"])(),Object(a["e"])("div",U,A)}var T={name:"Home",data(){return{data:""}},computed:{},methods:{}};const F=S()(T,[["render",E]]);var H=F;const B=Object(a["f"])("h1",null,"Recorder",-1),L=Object(a["f"])("br",null,null,-1),z={key:0},G=Object(a["f"])("label",{for:"select_audio"},"Périphérique Audio",-1),J=["change"],N=["value"],W=Object(a["f"])("br",null,null,-1),K=Object(a["f"])("label",{for:"select_audio"},"Périphérique Vidéo",-1),Q=["change"],X=Object(a["f"])("option",{value:"false"},"Aucun",-1),Y=["value"],Z=Object(a["f"])("br",null,null,-1),ee={id:"webcam",volume:"0",ref:"webcam",width:"1",height:"1",autoplay:""},te={id:"display",ref:"display",width:"1",height:"1",autoplay:""},se={width:"1280",id:"canvas",height:"720",style:{border:"1px solid #000000"},ref:"canvas"},ae={controls:"",id:"previewVideo",ref:"previewVideo",width:"300",height:"200",autoplay:""};function oe(e,t,s,o,n,i){return Object(a["q"])(),Object(a["e"])("div",null,[B,L,1==this.seeSelect?(Object(a["q"])(),Object(a["e"])("div",z,[Object(a["f"])("form",null,[G,Object(a["F"])(Object(a["f"])("select",{id:"select_audio","onUpdate:modelValue":t[0]||(t[0]=e=>this.audioChoice=e),change:i.setAudioParams()},[(Object(a["q"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(this.audioInput,e=>(Object(a["q"])(),Object(a["e"])("option",{key:e,value:e},Object(a["z"])(e.label),9,N))),128))],8,J),[[a["B"],this.audioChoice]]),W,K,Object(a["F"])(Object(a["f"])("select",{id:"select_audio","onUpdate:modelValue":t[1]||(t[1]=e=>this.videoChoice=e),change:i.setVideoParams()},[X,(Object(a["q"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(this.videoInput,e=>(Object(a["q"])(),Object(a["e"])("option",{key:e,value:e},Object(a["z"])(e.label),9,Y))),128))],8,Q),[[a["B"],this.videoChoice]]),Object(a["f"])("button",{onClick:t[2]||(t[2]=Object(a["G"])(e=>i.startWebcam(),["prevent"]))},"Démarrer webcam"),Z,Object(a["f"])("button",{onClick:t[3]||(t[3]=Object(a["G"])(e=>i.getDisplay(),["prevent"]))},"Choisir l'écran")])])):Object(a["d"])("",!0),null==this.mediaRecorder?(Object(a["q"])(),Object(a["e"])("button",{key:1,class:"btn btn-success",onClick:t[4]||(t[4]=Object(a["G"])(e=>i.record(),["prevent"]))}," Start Record ")):Object(a["d"])("",!0),null!=this.mediaRecorder?(Object(a["q"])(),Object(a["e"])("button",{key:2,class:"btn btn-danger",onClick:t[5]||(t[5]=Object(a["G"])(e=>i.stopRecord(),["prevent"]))}," Stop Record ")):Object(a["d"])("",!0),Object(a["f"])("div",null,[Object(a["f"])("video",ee,null,512),Object(a["f"])("video",te,null,512)]),Object(a["f"])("div",null,[Object(a["f"])("canvas",se,null,512)]),Object(a["f"])("video",ae,null,512)])}s("14d9");console.log("Hello");var ne={name:"Recorder",data(){return{mediaRecorder:null,chunks:[],canvas:null,ctx:null,isDrawing:null,webcamStream:"",displayStream:"",seeSelect:!1,audioInput:[],audioStream:null,audioChoice:"",videoChoice:"",videoInput:[],displayInput:[],constraints:{video:!0,audio:!0},displayMediaOptions:{video:{cursor:"always"},audio:!1}}},mounted(){var e=this;e.canvas=e.$refs.canvas,e.ctx=e.canvas.getContext("2d"),e.canvas.addEventListener("load",e.onLoad)},created(){this.main()},methods:{async main(){await this.getUserMedia()},stopRecord(){this.mediaRecorder.stop(),this.mediaRecorder=null},record(){console.log("recording ...");var e=this,t=[],s=e.canvas.captureStream(30);s.addTrack(this.webcamStream.getAudioTracks()[0]),console.log(s);const a={mimeType:"video/webm",videoMaximizeFrameRate:!0};e.mediaRecorder=new MediaRecorder(s,a),this.mediaRecorder=e.mediaRecorder,e.mediaRecorder.ondataavailable=function(e){t.push(e.data)},e.mediaRecorder.onstop=function(){var e=new Blob(t,{type:"video/webm"});console.log(e);const s=new File([e],"filename.webm",{type:e.type,lastModified:(new Date).getTime()});console.log(s);var a=new FormData;a.append("myfile",s),console.log(a);try{i.a.post(this.$store.state.gconfig.url_upload_file,a,{headers:{"Content-Type":"multipart/form-data"}})}catch(r){console.log(r)}t=[];var o=URL.createObjectURL(e),n=document.getElementById("previewVideo");console.log(n),n.src=o,console.log(o)},e.mediaRecorder.start(),this.onLoad()},onLoad(){var e=this,t=e.$refs.webcam,s=e.$refs.display;setInterval((function(){e.ctx.drawImage(s,0,0,1280,720),e.ctx.drawImage(t,0,0,426,240)}),1)},startWebcam(){this.seeSelect=!0,navigator.mediaDevices.getUserMedia(this.constraints).then(e=>{let t=document.getElementById("webcam");t.srcObject=e,this.webcamStream=e}),this.onLoad()},setVideoParams(){console.log("setVideoParams : "+this.videoChoice.deviceId),this.constraints.video={deviceId:this.videoChoice.deviceId}},setAudioParams(){console.log("setAudioParams : "+this.audioChoice.deviceId),this.constraints.audio={deviceId:this.audioChoice.deviceId},navigator.mediaDevices.getUserMedia({audio:{deviceId:this.audioChoice.deviceId}}).then(e=>{this.audioStream=e})},getUserMedia(){navigator.mediaDevices.getUserMedia(this.constraints).then(()=>{console.log("Streaming now"),this.seeSelect=!0,this.getDevices()})},getDisplay(){navigator.mediaDevices.getDisplayMedia(this.displayMediaOptions).then(e=>{let t=document.getElementById("display");t.srcObject=e,this.displayStream=e}),this.onLoad()},getDevices(){navigator.mediaDevices.enumerateDevices().then(e=>{e.forEach(e=>{"audioinput"===e.kind&&this.audioInput.push({deviceId:e.deviceId,kind:e.kind,label:e.label}),"videoinput"===e.kind&&this.videoInput.push({deviceId:e.deviceId,kind:e.kind,label:e.label})})})}}};const ie=S()(ne,[["render",oe]]);var re=ie,ce=s("0229"),le=s.n(ce);const ue=e=>(Object(a["t"])("data-v-02b1c78c"),e=e(),Object(a["r"])(),e),de={class:"container"},be={class:"row"},pe={id:"signup",class:"col"},me=ue(()=>Object(a["f"])("h1",null,"Sign Up",-1)),fe={class:"input-group mb-3"},he=ue(()=>Object(a["f"])("span",{class:"input-group-text"},[Object(a["f"])("i",{class:"fa-solid fa-user"})],-1)),je={class:"input-group mb-3"},ve=ue(()=>Object(a["f"])("span",{class:"input-group-text"},[Object(a["f"])("i",{class:"fa-solid fa-at"})],-1)),Oe={class:"input-group mb-3"},ge=ue(()=>Object(a["f"])("span",{class:"input-group-text"},[Object(a["f"])("i",{class:"fa-solid fa-lock"})],-1)),_e={class:"input-group mb-3"},we=ue(()=>Object(a["f"])("span",{class:"input-group-text"},[Object(a["f"])("i",{class:"fa-solid fa-lock"})],-1)),ye={key:0,class:"alert alert-danger",role:"alert"},Se={key:1,class:"d-grid gap-2"},ke={key:2,class:"d-grid gap-2"},Ce=ue(()=>Object(a["f"])("button",{class:"btn btn-outline-dark",disabled:""},[Object(a["f"])("div",{class:"spinner-border",role:"status"})],-1)),Re=[Ce],De={key:3,class:"alert alert-success",role:"alert"},Ie={key:4,class:"alert alert-danger",role:"alert"},xe=ue(()=>Object(a["f"])("div",{class:"col"},[Object(a["f"])("img",{alt:"Vue logo",width:"300",src:le.a})],-1));function Me(e,t,s,o,n,i){return Object(a["q"])(),Object(a["e"])("div",de,[Object(a["f"])("div",be,[Object(a["f"])("div",pe,[me,Object(a["f"])("div",fe,[he,Object(a["F"])(Object(a["f"])("input",{id:"user_nom",name:"user_nom",type:"text",class:"form-control",placeholder:"Nom","aria-label":"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>this.user_nom=e)},null,512),[[a["C"],this.user_nom]]),Object(a["F"])(Object(a["f"])("input",{id:"user_prenom",name:"user_prenom",type:"text",class:"form-control",placeholder:"Prenom","aria-label":"Prenom","onUpdate:modelValue":t[1]||(t[1]=e=>this.user_prenom=e)},null,512),[[a["C"],this.user_prenom]])]),Object(a["f"])("div",je,[ve,Object(a["F"])(Object(a["f"])("input",{id:"user_mail",name:"user_mail",type:"mail",class:"form-control",placeholder:"E-Mail","aria-label":"E-Mail","onUpdate:modelValue":t[2]||(t[2]=e=>this.user_mail=e)},null,512),[[a["C"],this.user_mail]])]),Object(a["f"])("div",Oe,[ge,Object(a["F"])(Object(a["f"])("input",{id:"user_password1",name:"user_password1",ref:"user_password1",type:"password",class:"form-control",placeholder:"Mot de passe","aria-label":"Mot de passe","onUpdate:modelValue":t[3]||(t[3]=e=>this.user_password1=e)},null,512),[[a["C"],this.user_password1]])]),Object(a["f"])("div",_e,[we,Object(a["F"])(Object(a["f"])("input",{id:"user_password2",name:"user_password2",ref:"user_password2",type:"password",class:"form-control",placeholder:"Retapez votre Mot de passe","aria-label":"Retapez votre Mot de passe","onUpdate:modelValue":t[4]||(t[4]=e=>this.user_password2=e),onChange:t[5]||(t[5]=e=>i.verifyPassword())},null,544),[[a["C"],this.user_password2]])]),0==n.validPassword?(Object(a["q"])(),Object(a["e"])("div",ye," Les mots de passe ne correspondents pas ")):Object(a["d"])("",!0),0==n.submitClick?(Object(a["q"])(),Object(a["e"])("div",Se,[Object(a["f"])("button",{ref:"submitButton",class:"btn btn-outline-dark",onClick:t[6]||(t[6]=Object(a["G"])(e=>i.submit(),["prevent"])),disabled:""}," S'inscrire ",512)])):Object(a["d"])("",!0),1==n.submitClick?(Object(a["q"])(),Object(a["e"])("div",ke,Re)):Object(a["d"])("",!0),200===this.serverResponse.status?(Object(a["q"])(),Object(a["e"])("div",De,Object(a["z"])(this.serverResponse.msg),1)):Object(a["d"])("",!0),200!=this.serverResponse.status&&null!=this.serverResponse.status?(Object(a["q"])(),Object(a["e"])("div",Ie,Object(a["z"])(this.serverResponse.msg),1)):Object(a["d"])("",!0)]),xe])])}var Pe={name:"Signup",data(){return{user_nom:null,user_prenom:null,user_mail:null,user_password1:null,user_password2:null,validPassword:null,submitClick:!1,serverResponse:{status:null,msg:null}}},methods:{verifyPassword(){this.user_password1==this.user_password2?(this.validPassword=!0,this.$refs.submitButton.disabled=!1):this.validPassword=!1},submit(){console.log("Submit form"),this.submitClick=!0;const e={user_nom:this.user_nom,user_prenom:this.user_prenom,user_mail:this.user_mail,user_password:this.user_password2};console.log(this.$store.state.gconfig);try{i.a.post(this.$store.state.gconfig.url_signup,e,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log(e),this.serverResponse=e.data,this.submitClick=!1})}catch(t){console.log(t)}}}};s("ba66");const qe=S()(Pe,[["render",Me],["__scopeId","data-v-02b1c78c"]]);var Ve=qe;const Ue={class:"container"},$e={class:"row"},Ae=Object(a["f"])("div",{class:"col"},[Object(a["f"])("img",{alt:"Vue logo",width:"300",src:le.a})],-1),Ee={id:"signup",class:"col"},Te=Object(a["f"])("h1",null,"Sign In",-1),Fe={class:"input-group mb-3"},He=Object(a["f"])("span",{class:"input-group-text"},[Object(a["f"])("i",{class:"fa-solid fa-at"})],-1),Be={class:"input-group mb-3"},Le=Object(a["f"])("span",{class:"input-group-text"},[Object(a["f"])("i",{class:"fa-solid fa-lock"})],-1),ze={key:0,class:"d-grid gap-2"};function Ge(e,t,s,o,n,i){return Object(a["q"])(),Object(a["e"])("div",Ue,[Object(a["f"])("div",$e,[Ae,Object(a["f"])("div",Ee,[Te,Object(a["f"])("form",null,[Object(a["f"])("div",Fe,[He,Object(a["F"])(Object(a["f"])("input",{id:"user_mail",name:"user_mail",type:"mail",class:"form-control",placeholder:"E-Mail","aria-label":"E-Mail","onUpdate:modelValue":t[0]||(t[0]=e=>this.user_mail=e)},null,512),[[a["C"],this.user_mail]])]),Object(a["f"])("div",Be,[Le,Object(a["F"])(Object(a["f"])("input",{id:"user_password1",name:"user_password1",ref:"user_password1",type:"password",class:"form-control",placeholder:"Mot de passe","aria-label":"Mot de passe","onUpdate:modelValue":t[1]||(t[1]=e=>this.user_password=e)},null,512),[[a["C"],this.user_password]])]),0==n.submitClick?(Object(a["q"])(),Object(a["e"])("div",ze,[Object(a["f"])("button",{ref:"submitButton",class:"btn btn-outline-dark",onClick:t[2]||(t[2]=Object(a["G"])(e=>i.submit(),["prevent"]))}," Se connecter ",512)])):Object(a["d"])("",!0)])])])])}var Je={name:"Signin",data(){return{user_mail:null,user_password:null,submitClick:!1}},methods:{addHours(e,t=new Date){return t.setTime(t.getTime()+60*e*60*1e3),t},submit(){console.log("submit");const e={user_mail:this.user_mail,user_password:this.user_password};try{i.a.post(this.$store.state.gconfig.url_signin,e,{headers:{"Content-Type":"application/json"}}).then(e=>{if(this.serverResponse=e.data,this.submitClick=!1,200===e.data.status){this.$store.state.userData=e.data.user_data;let t=this.addHours(2);sessionStorage.setItem("userData",JSON.stringify({user_data:e.data.user_data,timeout:t})),this.$router.push("/Account")}})}catch(t){console.log(t)}}}};const Ne=S()(Je,[["render",Ge]]);var We=Ne;const Ke={class:"container"},Qe=Object(a["f"])("h1",null,"Account",-1),Xe=[Qe];function Ye(e,t,s,o,n,i){return Object(a["q"])(),Object(a["e"])("div",Ke,Xe)}var Ze={name:"Account"};const et=S()(Ze,[["render",Ye]]);var tt=et;function st(e,t,s,o,n,i){return Object(a["q"])(),Object(a["e"])("h1",null,"Home")}var at={name:"Home",data(){return{data:""}},computed:{},methods:{}};const ot=S()(at,[["render",st]]);var nt=ot;const it=[{name:"Home",path:"/",component:H,meta:{title:"Home"}},{name:"Recorder",path:"/Recorder",component:re,meta:{title:"Recorder"}},{name:"Account",path:"/Account",component:tt,meta:{title:"Account"}},{name:"Signup",path:"/Signup",component:Ve,meta:{title:"Signup"}},{name:"Signin",path:"/Signin",component:We,meta:{title:"Signin"}},{name:"ErrorPage",path:"/ErrorPage",component:nt,meta:{title:"Error Page"}}],rt=Object(V["a"])({history:Object(V["b"])(),routes:it});rt.afterEach(e=>{document.title=e.meta.title});var ct=rt,lt=(s("15f5"),s("7051"),s("f5af")),ut=s.n(lt);s("e829");const dt=Object(a["c"])(I);dt.use(ct),dt.use(q),dt.use(ut.a.init()),dt.mount("#app")},ba66:function(e,t,s){"use strict";s("c1e4")},be6f:function(e){e.exports=JSON.parse('{"p_url_signup":"http://localhost:3000/signup","p_url_signin":"http://localhost:3000/signin","p_url_upload_file":"http://localhost:3000/upload_file","url_signup":"http://212.227.71.186:3000/signup","url_signin":"http://212.227.71.186:3000/signin","url_upload_file":"http://212.227.71.186:3000/upload_file"}')},c1e4:function(e,t,s){},cd18:function(e,t,s){"use strict";s("43fb")},f33e:function(e,t,s){}});
//# sourceMappingURL=app.d207a534.js.map